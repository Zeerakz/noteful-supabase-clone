
/* WCAG 2.2 AA Accessibility Contrast Compliance */

:root {
  /* Enhanced contrast color tokens for WCAG 2.2 AA compliance */
  --sidebar-background: 0 0% 100%;
  --sidebar-foreground: 240 10% 3.9%;
  --sidebar-primary: 240 5.9% 10%;
  --sidebar-primary-foreground: 0 0% 98%;
  --sidebar-accent: 240 4.8% 95.9%;
  --sidebar-accent-foreground: 240 5.9% 10%;
  --sidebar-border: 240 5.9% 91%;
  --sidebar-ring: 240 5% 64.9%;
  
  /* High contrast focus indicators */
  --focus-ring-primary: 217 91% 40%;
  --focus-ring-secondary: 240 5.9% 10%;
  --focus-background: 217 91% 95%;
  
  /* State indicators with 3:1 minimum contrast */
  --hover-background: 240 4.8% 95.9%;
  --active-background: 217 91% 92%;
  --selected-background: 217 91% 88%;
  
  /* Enhanced text contrast ratios (4.5:1 minimum) */
  --text-primary: 240 10% 3.9%;
  --text-secondary: 240 3.8% 46.1%;
  --text-muted: 240 4.8% 50%;
  --text-on-primary: 0 0% 98%;
}

.dark {
  /* Dark mode enhanced contrast for WCAG compliance */
  --sidebar-background: 240 10% 3.9%;
  --sidebar-foreground: 0 0% 98%;
  --sidebar-primary: 0 0% 98%;
  --sidebar-primary-foreground: 240 5.9% 10%;
  --sidebar-accent: 240 3.7% 15.9%;
  --sidebar-accent-foreground: 0 0% 98%;
  --sidebar-border: 240 3.7% 15.9%;
  --sidebar-ring: 240 4.9% 83.9%;
  
  /* Dark mode focus indicators */
  --focus-ring-primary: 217 91% 70%;
  --focus-ring-secondary: 0 0% 98%;
  --focus-background: 217 91% 15%;
  
  /* Dark mode state indicators */
  --hover-background: 240 3.7% 15.9%;
  --active-background: 217 91% 20%;
  --selected-background: 217 91% 25%;
  
  /* Dark mode text with enhanced contrast */
  --text-primary: 0 0% 98%;
  --text-secondary: 240 5% 84%;
  --text-muted: 240 5% 74%;
  --text-on-primary: 240 5.9% 10%;
}

/* Sidebar component accessibility styles */
.sidebar-accessible {
  background-color: hsl(var(--sidebar-background));
  color: hsl(var(--text-primary));
  border-color: hsl(var(--sidebar-border));
}

/* High-visibility focus indicators */
.sidebar-focus-ring {
  outline: none;
  position: relative;
}

.sidebar-focus-ring:focus-visible::before {
  content: '';
  position: absolute;
  inset: -3px;
  border: 3px solid hsl(var(--focus-ring-primary));
  border-radius: 6px;
  background-color: hsl(var(--focus-background) / 0.1);
  z-index: 10;
  animation: focus-appear 0.15s ease-out;
}

.sidebar-focus-ring:focus-visible {
  background-color: hsl(var(--focus-background) / 0.05);
  box-shadow: 
    0 0 0 3px hsl(var(--focus-ring-primary)),
    0 0 0 6px hsl(var(--focus-ring-primary) / 0.2);
}

@keyframes focus-appear {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Enhanced sidebar menu item styles */
.sidebar-menu-item {
  color: hsl(var(--text-primary));
  background-color: transparent;
  border-radius: 6px;
  transition: all 0.15s ease-out;
  position: relative;
}

.sidebar-menu-item:hover {
  background-color: hsl(var(--hover-background));
  color: hsl(var(--text-primary));
}

.sidebar-menu-item[aria-current="page"] {
  background-color: hsl(var(--selected-background));
  color: hsl(var(--text-primary));
  font-weight: 600;
}

.sidebar-menu-item[aria-current="page"]::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 20px;
  background-color: hsl(var(--focus-ring-primary));
  border-radius: 0 2px 2px 0;
}

/* Secondary text with proper contrast */
.sidebar-text-secondary {
  color: hsl(var(--text-secondary));
}

.sidebar-text-muted {
  color: hsl(var(--text-muted));
}

/* Group labels with enhanced contrast */
.sidebar-group-label {
  color: hsl(var(--text-secondary));
  font-weight: 600;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* Action buttons with proper contrast */
.sidebar-action-button {
  color: hsl(var(--text-secondary));
  background-color: transparent;
  border-radius: 4px;
  transition: all 0.15s ease-out;
}

.sidebar-action-button:hover {
  color: hsl(var(--text-primary));
  background-color: hsl(var(--hover-background));
}

.sidebar-action-button:focus-visible {
  outline: 2px solid hsl(var(--focus-ring-primary));
  outline-offset: 1px;
  background-color: hsl(var(--focus-background) / 0.1);
}

/* Dropdown menu accessibility */
.sidebar-dropdown-content {
  background-color: hsl(var(--sidebar-background));
  border: 1px solid hsl(var(--sidebar-border));
  box-shadow: 
    0 4px 6px -1px hsl(var(--text-primary) / 0.1),
    0 2px 4px -1px hsl(var(--text-primary) / 0.06);
}

.sidebar-dropdown-item {
  color: hsl(var(--text-primary));
  background-color: transparent;
}

.sidebar-dropdown-item:hover {
  background-color: hsl(var(--hover-background));
}

.sidebar-dropdown-item:focus-visible {
  background-color: hsl(var(--focus-background) / 0.1);
  outline: 2px solid hsl(var(--focus-ring-primary));
  outline-offset: -2px;
}

/* Collapsible trigger with proper contrast */
.sidebar-trigger {
  color: hsl(var(--text-primary));
  background-color: transparent;
  border: 1px solid hsl(var(--sidebar-border));
  border-radius: 6px;
}

.sidebar-trigger:hover {
  background-color: hsl(var(--hover-background));
}

.sidebar-trigger:focus-visible {
  outline: 3px solid hsl(var(--focus-ring-primary));
  outline-offset: 2px;
  background-color: hsl(var(--focus-background) / 0.1);
}

/* Tree view accessibility */
.tree-item-focused {
  background-color: hsl(var(--focus-background) / 0.1);
  outline: 2px solid hsl(var(--focus-ring-primary));
  outline-offset: -2px;
  border-radius: 4px;
}

/* Status indicators with 3:1 contrast */
.status-indicator {
  border-radius: 50%;
  display: inline-block;
  width: 8px;
  height: 8px;
}

.status-indicator.syncing {
  background-color: hsl(217 91% 60%);
  animation: pulse 1.5s ease-in-out infinite;
}

.status-indicator.error {
  background-color: hsl(0 84% 60%);
}

.status-indicator.success {
  background-color: hsl(142 76% 36%);
}

/* Warning indicators */
.warning-indicator {
  color: hsl(38 92% 50%);
  background-color: hsl(48 96% 89%);
  border: 1px solid hsl(38 92% 50%);
}

.dark .warning-indicator {
  color: hsl(48 96% 89%);
  background-color: hsl(38 92% 15%);
  border: 1px solid hsl(38 92% 50%);
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --sidebar-border: 240 5.9% 70%;
    --focus-ring-primary: 240 100% 50%;
    --text-secondary: 240 10% 20%;
  }
  
  .dark {
    --sidebar-border: 240 5.9% 40%;
    --focus-ring-primary: 60 100% 50%;
    --text-secondary: 240 5% 90%;
  }
  
  .sidebar-focus-ring:focus-visible::before {
    border-width: 4px;
  }
  
  .sidebar-focus-ring:focus-visible {
    box-shadow: 
      0 0 0 4px hsl(var(--focus-ring-primary)),
      0 0 0 8px hsl(var(--focus-ring-primary) / 0.3);
  }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .sidebar-menu-item,
  .sidebar-action-button,
  .sidebar-trigger {
    transition: none;
  }
  
  .sidebar-focus-ring:focus-visible::before {
    animation: none;
  }
  
  .status-indicator.syncing {
    animation: none;
  }
}
